---
title: "p8105_hw2_rac2224"
author: "Rachel Crowley"
date: "10/3/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Problem 1

Reading and cleaning the Mr. Trash Wheel dataset

```{r}
library(tidyverse)
library(readxl)
trash_data = read_excel("./data/Trashwheel.xlsx", sheet = 1, range = "A2:N408",   col_types =   NULL) 
  trash_data = janitor::clean_names(trash_data) 
  trash_data = drop_na(trash_data, dumpster) 
  trash_data = mutate(trash_data, 
                      sports_balls = round(sports_balls, digits = 0)) 
  as.integer(pull(trash_data, sports_balls))
```

Reading and cleaning precipitation datasets for 2017 and 2018

```{r}
prec2018_data = read_excel("./data/Trashwheel.xlsx", sheet = 5, range =           "A2:B14", col_types = NULL)
  prec2018_data = janitor::clean_names(prec2018_data)
  prec2018_data = mutate(prec2018_data,
                         year = "2018")
prec2017_data = read_excel("./data/Trashwheel.xlsx", sheet = 6, range =           "A2:B14", col_types = NULL)
  prec2017_data = janitor::clean_names(prec2017_data)
  prec2017_data = mutate(prec2017_data,
                         year = "2017")
```

Combining precipitation datasets and converting month to character variable

```{r}
precip_data = 
  full_join(prec2017_data, prec2018_data)
precip_data = transform(precip_data, month = month.name)
```

The number of observations in the dataset precip_data is `r nrow(precip_data)`. The number of observations in the dataset trash_data is `r nrow(trash_data)`.
Within the dataset precip_data, key variables include month, total, and year. Within the dataset trash_data, key variables include dumpster, month, year, date, weight_tons, volume_cube_yards, plastic_bottles, polystyrene, cigarette_butts, glass_bottles, grocery_bags, chip_bags, sports_balls, and homes_powered.
The total precipitation in 2018 is `r sum(prec2018_data$total)`.
The median number of sports balls in a dumpster in 2017 is `r  median(subset(trash_data, year==2017)$sports_balls)`. 

Problem 2

Cleaning data in FiveThirtyEight

Cleaning pols-month dataset
```{r}
polsmonth_data=read_csv(file = "./data/pols-month.csv")
polsmonth_data = janitor::clean_names(polsmonth_data)
polsmonth_data = separate(polsmonth_data, 
                          mon, into=c("year", "month","day"))
polsmonth_data = mutate(polsmonth_data, month=month.name[as.integer(month)]) 
polsmonth_data = mutate(polsmonth_data, president = prez_gop + prez_dem) %>%
  select( -prez_gop, -prez_dem, -day)  
```

Cleaning snp dataset

```{r}
snp_data=read_csv(file = "./data/snp.csv")
snp_data = janitor::clean_names(snp_data)
snp_data = separate(snp_data, 
                          date, into=c("month", "day","year"))
snp_data = mutate(snp_data, month=month.name[as.integer(month)]) %>%
  select(-day) 
snp_data = select(snp_data, year, month, everything())
snp_data = head(arrange(snp_data, year, month), 787)
```

Cleaning unemployment dataset

```{r}
unemployment_data=read_csv(file = "./data/unemployment.csv")
unemployment_data = janitor::clean_names(unemployment_data)
unemployment_data = 
    pivot_longer(
    unemployment_data,
    jan:dec,
    names_to = "month",
    values_to = "unemployment")
unemployment_data = transform(unemployment_data, month = month.name)
```
Merging snp, employment, and pols datasets

```{r}
unemployment_data <- unemployment_data %>%  
    mutate(year = as.character(year))
polsnp_data =
  left_join(polsmonth_data, snp_data)
merged_data = 
  left_join(polsnp_data, unemployment_data)
```

## explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables)

Problem 3

Cleaning Popular Baby Names dataset

```{r}
babynames_data=read_csv(file = "./data/Popular_Baby_Names.csv")
babynames_data = janitor::clean_names(babynames_data)
babynames_data = babynames_data %>% distinct()
babynames_data$ethnicity <- gsub("BLACK NON HISPANIC", "BLACK NON HISP", babynames_data$ethnicity)
babynames_data$ethnicity <- gsub("WHITE NON HISPANIC", "WHITE NON HISP", babynames_data$ethnicity)
babynames_data$ethnicity <- gsub("ASIAN AND PACIFIC ISLANDER", "ASIAN AND PACI", babynames_data$ethnicity)
babynames_data= mutate(babynames_data, childs_first_name = str_to_title(childs_first_name))
```
